"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[773],{80:function(t,n,r){var o=r(664);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){throw t})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){l=!0,i=t})),f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function s(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}window.Lists=new function(){this.store=function(t,e){sessionStorage.setItem("list-"+t,JSON.stringify(e))},this.clear=function(t){sessionStorage.setItem("list-"+t,JSON.stringify([]))},this.appendOrStore=function(t,e){Lists.get(t)?Lists.append(t,e):Lists.store(t,e)},this.removeDuplicates=function(t){var e=Lists.get(t);e=e.reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),Lists.store(t,e)},this.append=function(t,e){var n=Lists.get(t);n=n.concat(e),sessionStorage.setItem("list-"+t,JSON.stringify(n))},this.merge=function(t,e){var n=Lists.get(t),r=Lists.get(e);n=n.concat(r),sessionStorage.setItem("list-"+t,JSON.stringify(n))},this.shuffle=function(t){for(var e=JSON.parse(sessionStorage.getItem("list-"+t)),n=e.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),o=e[n];e[n]=e[r],e[r]=o}return sessionStorage.setItem("list-"+t,JSON.stringify(e)),this},this.get=function(t){try{return JSON.parse(sessionStorage.getItem("list-"+t))}catch(t){return!1}}},window.Spotifynt=new function(){var t="http://192.168.1.5:9000";this.player=new function(){this.show=function(t){document.querySelector("#audio-player").src=Spotifynt.command.fileUrl(t.id),document.querySelector("#text-songTitle").textContent=t.title,document.querySelector("#text-songArtist").textContent=t.artist,document.querySelector("#img-songArt").src=Spotifynt.command.artUrl(t.album_id),document.querySelector("#row-player").hidden=!1,document.querySelector("#text-songBitrate").textContent=Math.round(t.bitrate/1e3)+" kpbs",document.querySelector("#text-songFormat").textContent=t.format,Spotifynt.metadata.set(t,Spotifynt.command.artUrl(t.album_id)),Spotifynt.displayPlayer(!0),(new o.Z).getColorAsync(document.querySelector("#img-songArt").src).then((function(t){document.querySelector("#app").style.backgroundColor=t.hex+"99",document.querySelector("meta[name='theme-color'").content=t.hex})).catch((function(t){return console.log(t)}))}},this.playlist=new function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playlist-actual";return Lists.get(t)}this.new=function(t,e){var n,r=[],o=a(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.push(i.id)}}catch(t){o.e(t)}finally{o.f()}return Lists.clear(t),Lists.store(t,r),Lists.removeDuplicates(t),this},this.load=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"playlist-actual";return n&&Lists.shuffle(e),Lists.appendOrStore(r,t(e)),Lists.removeDuplicates(r),this},this.clear=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playlist-actual";return Lists.clear(t),this},this.play=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"playlist-actual";!1===e&&(e=parseInt(sessionStorage.getItem("playlist-actual-i"))),sessionStorage.setItem("playlist-actual-i",e),Spotifynt.command.item(t(n)[e]).then((function(t){Spotifynt.player.show(t),Spotifynt.player_playpause("play")}))},this.move=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"playlist-actual",r=t(n).length,o=parseInt(sessionStorage.getItem("playlist-actual-i")),i=((o+e)%r+r)%r;return sessionStorage.setItem("playlist-actual-i",i),this}},this.metadata=new function(){this.set=function(t,e){navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:t.artist,album:t.album,artwork:[{src:e,sizes:"512x512",type:"image/png"}]})}},this.command=new function(){function e(e){return fetch("".concat(t,"/").concat(e),{method:"GET"}).then((function(t){return t.json()}))}this.getAlbumSongs=function(t){return e("album/".concat(t,"?expand"))},this.item=function(t){return e("item/".concat(t))},this.querySong=function(t){return e("item/query/".concat(t))},this.queryAlbum=function(t){return e("album/query/".concat(t))},this.artUrl=function(e){return"".concat(t,"/album/").concat(e,"/art")},this.fileUrl=function(e){return"".concat(t,"/item/").concat(e,"/file")}},this.search=function(t){this.command.querySong(t).then((function(t){var e=t.results;!function(t,e){sessionStorage.setItem("list_showing",e);var n=document.querySelector("#div-songResults");n.innerHTML="";var r,o=a(t.entries());try{for(o.s();!(r=o.n()).done;){var s=i(r.value,2),l=(s[0],s[1]),u=document.querySelector("#template-songResult").cloneNode(!0).content;u.querySelector("[data-song='title']").textContent="".concat(l.title),u.querySelector("[data-song='artist']").textContent="".concat(l.artist),n.appendChild(u)}}catch(t){o.e(t)}finally{o.f()}Spotifynt.displaySongResults(!0)}(e,"search"),Spotifynt.playlist.new("search",e)})).catch((function(t){return console.error(t)})),this.command.queryAlbum(t).then((function(t){!function(t){var e=document.querySelector("#div-albumResults");e.innerHTML="";var n,r=a(t.entries());try{var o=function(){var t=i(n.value,2),r=(t[0],t[1]),o=document.querySelector("#template-albumResult").cloneNode(!0).content;o.querySelector("[data-album='title']").textContent="".concat(r.album),o.querySelector("[data-album='artist']").textContent="".concat(r.albumartist),o.querySelector("[data-album='art']").src=Spotifynt.command.artUrl(r.id),o.querySelector("[data-album='append']").addEventListener("click",(function(){Spotifynt.getAlbumSongs(r.id).then((function(t){return Spotifynt.playlist.new("album-".concat(r.id),t.items).load("album-".concat(r.id))}))})),o.querySelector("[data-album='play']").addEventListener("click",(function(){Spotifynt.getAlbumSongs(r.id).then((function(t){Spotifynt.playlist.new("album-".concat(r.id),t.items).clear().load("album-".concat(r.id)).play(0)}))})),e.appendChild(o)};for(r.s();!(n=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}Spotifynt.displayAlbumResults(!0)}(t.results)})).catch((function(t){return console.error(t)}))},this.show_info=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=sessionStorage.getItem("list_showing"),r=JSON.parse(sessionStorage.getItem("list-".concat(n)))[t];beet_getItem(r).then((function(t){for(e in document.querySelector("#modal-infoBody").innerHTML="",t)p=document.createElement("p"),p.innerHTML="<b>".concat(e,"</b>: ").concat(t[e]),document.querySelector("#modal-infoBody").appendChild(p);document.querySelector("#modal-infoTitle").textContent=t.title,$("#modal-info").modal("show")}))},this.getAlbumSongs=function(t){return Spotifynt.command.getAlbumSongs(t)},this.btn_play=function(t){var e=sessionStorage.getItem("list_showing");e.clear("playlist"),e.merge("playlist",e),playlist_play(t)},this.player_playpause=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.querySelector("#audio-player");e.paused||"play"===t?(sessionStorage.setItem("player_playing","playing"),document.querySelector("#icon-pause").hidden=!1,document.querySelector("#icon-play").hidden=!0,e.play()):e.paused&&"pause"!==t||(sessionStorage.setItem("player_playing","paused"),document.querySelector("#icon-play").hidden=!1,document.querySelector("#icon-pause").hidden=!0,e.pause())},this.displaySongResults=function(t){document.querySelector("#row-songResults").hidden=!t},this.displayAlbumResults=function(t){document.querySelector("#row-albumResults").hidden=!t},this.displayPlayer=function(t){document.querySelector("#row-player").hidden=!t}},navigator.mediaSession.setActionHandler("play",(function(){return Spotifynt.player_playpause("play")})),navigator.mediaSession.setActionHandler("pause",(function(){return Spotifynt.player_playpause("pause")})),navigator.mediaSession.setActionHandler("previoustrack",(function(){return Spotifynt.playlist.move(-1).play()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){return Spotifynt.playlist.move(1).play()})),document.querySelector("#input-search").addEventListener("change",(function(t){return Spotifynt.search(t.target.value)})),document.querySelector("#audio-player").addEventListener("ended",(function(){return Spotifynt.playlist.move(1).play()})),document.querySelector("#btn-nextSong").addEventListener("click",(function(){return Spotifynt.playlist.move(1).play()})),document.querySelector("#btn-prevSong").addEventListener("click",(function(){return Spotifynt.playlist.move(-1).play()})),document.querySelector("#btn-playpause").addEventListener("click",(function(){return Spotifynt.player_playpause()})),document.querySelector("#btn-playPlaylist").addEventListener("click",(function(){Spotifynt.playlist.clear().load("search",!0).play(0)})),document.querySelector("#btn-appendPlaylist").addEventListener("click",(function(){Spotifynt.playlist.load("search")})),window.addEventListener("beforeunload",(function(t){t.preventDefault(),t.returnValue=""}))},662:function(){}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[170,898],(function(){return e(80),e(662)}));t.O()}]);
//# sourceMappingURL=app.js.map